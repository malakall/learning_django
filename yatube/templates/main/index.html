<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Главная страница уоууу</title>
</head>
<body>
    {% include "main/includes/header.html" %}  <!-- Подключаем header -->

    <p>Мой сайт лооо</p>

    <a href="/orders/">тык на заказы</a>
    
    <form method="get" action="{% url 'index' %}">
    <input type="text" name="author" placeholder="Введите имя автора" value="{{ request.GET.author }}">
    <button type="submit">Поиск</button>
    </form>


    <h2>Список групп:</h2>
    <ul>
    {% for group in groups %}
        <li>
            <h3>{{ group.name }}</h3>
            <p>{{ group.description }}</p>
            <p>{{ group.user_name }}</p>
            {% if group.image %}
            <img src="{{ group.image.url }}" alt="Фото группы" width="300">
            {% endif %}
            {% if group.user == request.user %}
                <a href="{% url 'delete_group' group.id %}">Удалить</a>
                <p>
                    <a href="{% url 'edit_group' group.id %}">изменить форму</a>
                </p>
            {% endif %}
        </li>
    {% endfor %}
</ul>

<!-- Paginator-->
<div class="pagination">
    <span class="step-links">
        {% if groups.has_previous %}
            <a href="?page=1{% if request.GET.author %}&author={{ request.GET.author }}{% endif %}">&laquo; первая</a>
            <a href="?page={{ groups.previous_page_number }}{% if request.GET.author %}&author={{ request.GET.author }}{% endif %}">предыдущая</a>
        {% endif %}

        <span class="current">
            Страница {{ groups.number }} из {{ groups.paginator.num_pages }}.
        </span>

        {% if groups.has_next %}
            <a href="?page={{ groups.next_page_number }}{% if request.GET.author %}&author={{ request.GET.author }}{% endif %}">следующая</a>
            <a href="?page={{ groups.paginator.num_pages }}{% if request.GET.author %}&author={{ request.GET.author }}{% endif %}">последняя &raquo;</a>
        {% endif %}
    </span>
</div>
</div>
    {% if user.is_authenticated %}
    <h2>Добавить новую группу</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Добавить</button>
    </form>

    <div>
        <h5>
            <a href="{% url 'send_form' %}">отправить отзыв</a>
        </h5>
    {% endif %}
    </div>
</body>
</html>
